<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<th:block th:replace="fragments/risorse :: risorse-head"></th:block>
<link rel="stylesheet" th:href="@{/home/home.css}">
<title>Global Museum</title>
</head>
<body>
	<nav th:replace="fragments/navbar :: navbar('rifornimento')"></nav>

	<div class="container">
	
	<div class="mt-3 mb-3 alert alert-success" th:if="${successSms != null && successSms != ''}" th:text="${successSms}"></div>

		<hr />

		<div class="container flex-container">
		<h2>Riepilogo assortimento</h2>
			<table class="table">
				<thead>
					<tr>
						<th scope="col">Prodotto</th>
						<th scope="col">Quantita</th>
						<th scope="col">Costo unitario</th>
						<th scope="col">Costo totale</th>
						<th scope="col">Azioni</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="r : ${listaRifornimenti}">
						<td th:text="${r.prodotto.nome}"></td>
						<td th:text="${r.quantita}"></td>
						<td th:text="'€' + ${r.prezzo}"></td>
						<td th:text="'€' + ${r.quantita*r.prezzo}"></td>
						<td><a th:href="@{|/rifornimento/delete/${r.id}|}"><button type="button" class="btn btn-outline-danger"><i class="fa-solid fa-trash"></i></button></a></td>
					</tr>
				</tbody>
			</table>
		</div>
        
		<h3 class="mt-5">Aggiungi lotto</h3>
		<!-- FORM RIFORNIMENTO-->
		<form id="form-rifornimento" 
		    th:object="${rifornimento}"
			th:action="@{/rifornimento/add}" 
			method="POST" class="row">
			<ul class="col-12">
				<li th:each="err : ${#fields.allErrors()}" th:text="${err}"></li>
			</ul>

			<div class="container">
				<input type="hidden" th:field="*{id}"> <input type="hidden"
					th:field="*{assortimento}">
				<!--   		<select class="form-select form-select mb-3" aria-label=".form-select example" type="select" name="assortimento[]" id="dept"> -->
				<!--               <option selected> Seleziona l'assortimento</option> -->
				<!-- 			<option type="hidden" th:each="assortimento : ${assList}"  th:value="${assortimento.id}" th:field="*{assortimento}" selected="selected"> -->
				<!-- 			<th:block></th:block> -->
				<!-- 			</option> -->
				<!-- <!-- 			</select> -->
				<!--   		<select class="form-select form-select mb-3" aria-label=".form-select example" type="select" name="assortimento[]" id="dept"> -->
				<!--               <option selected> Seleziona la data</option> -->
				<!-- 			<option th:each="assortimento : ${assList}"  th:value="${assortimento.id}" th:text="${assortimento.data}"></option> -->
				<!-- 			</select> -->

				<div>
					<table id="emptbl">
						<tr>
							<th>Quantità</th>
							<th>Prezzo</th>
							<th>Prodotto</th>
							<th>Save</th>
						</tr>
						<tr>

							<td id="col0"><input type="number" name="quantita"
								th:field="*{quantita}" value="" /></td>
							<td id="col1"><input type="number" name="prezzo"
								th:field="*{prezzo}" value="" /></td>
							<td id="col2"><select class="form-select form-select mb-3"
								aria-label=".form-select example" type="select"
								name="prodotto[]" id="dept">
									<option selected>Apri il menù</option>
									<option th:each="prodotto : ${prodottiList}"
										th:value="${prodotto.id}" th:text="${prodotto.nome}"></option>
							</select></td>
							<td>
								<div class="bottoni">
									<button type="submit" class="btn btn-primary">Save</button>
									<!-- 	  				<a class="btn btn-primary" href="/">Cancel</a> -->
								</div>
							</td>
						</tr>
					</table>
					<table>
						<tr>
							<td><input type="button-submit" value="Add Row"
								onclick="addRows()" name="submit" class="btn" /></td>
							<td><input type="button" value="Delete Row"
								onclick="deleteRows()" /></td>

						</tr>


					</table>
				</div>
			</div>
			<div class="bottoni">
			    <a th:href="@{/acquisto/acquisto}">
				<button type="submit" class="btn btn-primary">Termina</button>
				</a>
				<a class="btn btn-primary" href="/">Cancel</a>
			</div>
	</div>

	</form>
	<script src="/assortimento.js"></script>
</body>
</html>